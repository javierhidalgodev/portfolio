---
import LinkButton from './LinkButton.astro';
import Badge from './Badge.astro'
import Demo from '../icons/Demo.astro'
import Github from '../icons/Github.astro';

const {object} = Astro.props
const {title, thumbnail, description, links, technologies} = object

const setPallete = (brand) => {
  switch (brand) {
    case 'HTML':
      return 'bg-[#dd4b25] border-[#dd4b25]'
    case 'CSS':
      return 'bg-[#2173f7] border-[#2173f7]'
    case 'JavaScript':
      return 'bg-[#efd81d] border-[#efd81d]'
    case 'React':
      return 'bg-[#149eca] border-[#149eca]'
    case 'Astro':
        return 'bg-[#e63ba9] border-[#e63ba9]'
    case 'Vite':
      return 'bg-[#ffbc14] border-[#ffbc14]'
    case 'Bootstrap':
      return 'bg-[#7c10f7] border-[#7c10f7]'
    case 'Tailwind':
      return 'bg-[#38bdf8] border-[#38bdf8]'
    case 'Sass':
      return 'bg-[#63b649] border-[#63b649]'
    case 'Node':
      return 'bg-[#63b649] border-[#63b649]'
      case 'Express':
      return 'bg-[#020202] border-[#020202]'
    case 'SQL':
      return 'bg-[#b91c1c] border-[#b91c1c]'
    case 'MongoDB':
      return 'bg-[#b1ff05] border-[#b1ff05]'
  }
}

---

<div class="project-card relative sm:p-5 rounded-lg md:flex gap-8 sm:border-[1px] border-neutral-300/35">
  <div class="project-bg pointer-events-none top-0 left-0 absolute w-full h-full opacity-0 z-0 duration-500"></div>
  <div class="md:w-1/2 z-10">
    <img class="w-full rounded-lg border-[1px] border-neutral-700" src={`/portfolio/${thumbnail}`} alt="project img">
  </div>
  <div class="project-description flex flex-col gap-3 md:w-1/2 mt-4 lg:mt-0 z-10">
    <h3 id="project-title" class="font-[700] text-[24px] text-[var(--accent-color)]">{title}</h3>
    <div class="project-tech flex gap-2">
      {
        technologies.map(tech => <Badge label={tech} palette ={setPallete(tech)} />)
      }
    </div>
    <p>{description}</p>
    <div class="project-links-container flex gap-3">
      <LinkButton text="Demo" url={links.demo}>
        <Demo />
      </LinkButton>
      <LinkButton text="Repositorio" url={links.repo}>
        <Github />
      </LinkButton>
    </div>
  </div>
</div>

<script>
  const projectCards = document.querySelectorAll('.project-card')
  
  projectCards.forEach(pC => {
    const pCbg = pC.querySelector('.project-bg')
    pC.addEventListener('mouseenter', () => {
      pCbg.classList.replace('opacity-0', 'opacity-1')
    })
    
    pC.addEventListener('mousemove', (e) => {
      const b = pCbg.getBoundingClientRect()
      pCbg.style.background = `radial-gradient(600px circle at ${e.clientX - b.left}px ${e.clientY - b.top}px, rgba(221, 255, 0, 0.1), transparent 40%)`
    })

    pC.addEventListener('mouseleave', () => {
      pCbg.classList.replace('opacity-1', 'opacity-0')
    })
  })
</script>